@*
 * Copyright 2022 HM Revenue & Customs
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *@

@import uk.gov.hmrc.play.views.html.helpers.{FormWithCSRF}
@import uk.gov.hmrc.govukfrontend.views.Aliases.RadioItem
@import uk.gov.hmrc.govukfrontend.views.Aliases.Text
@import views.ViewUtils._

@this(layout: templates.layout,
        errorSummary: components.errorSummary,
        formWithCSRF: FormWithCSRF,
        inputRadio: components.inputRadio,
        button: components.button,
        h1: components.h1,
        p: components.p,
        inputTextArea: components.inputTextArea,
        h2: components.h2,
        yesNoRadio: components.yesNoRadio)

@(qForm: Form[models.QuestionnaireModel])(implicit request: Request[_], messages: Messages, appConfig: config.AppConfig)

@layout(pageTitle = Some(title(qForm, messages("page.reg.questionnaire.title"))), backLink = false) {

    <script src=@controllers.routes.Assets.at("javascripts/ExitQuestionnaire.js") type="text/javascript"></script>

    @errorSummary(qForm.errors)
    @formWithCSRF(action = controllers.reg.routes.QuestionnaireController.submit) {

        @h1(Messages("page.reg.questionnaire.title"))

       @p {
           @messages("page.reg.questionnaire.reason")
       }

        @h2(messages("page.reg.questionnaire.q2"))

            @inputRadio(
                form = qForm,
                fieldName = "tryingToDo",
                inline = false,
                legend = messages("page.reg.questionnaire.q2"),
                classes = "govuk-visually-hidden",
                items = Seq(
                    RadioItem(
                        id = Some("RegisterCompany_1"),
                        content = Text(messages("page.reg.questionnaire.q2.a1")),
                        value = Some("RegisterCompany_1"),
                        checked = qForm("tryingToDo").value.contains("RegisterCompany_1")
                    ),
                    RadioItem(
                        id = Some("RegisterEmployer_2"),
                        content = Text(messages("page.reg.questionnaire.q2.a2")),
                        value = Some("RegisterEmployer_2"),
                        checked = qForm("tryingToDo").value.contains("RegisterEmployer_2")
                    ),
                    RadioItem(
                        id = Some("Both_3"),
                        content = Text(messages("page.reg.questionnaire.q2.a3")),
                        value = Some("Both_3"),
                        checked = qForm("tryingToDo").value.contains("Both_3")
                    ),
                ),
                legendAsHeading = false,
            )

        @h2(messages("page.reg.questionnaire.q1"))

        @yesNoRadio(
            form = qForm,
            id = "ableToAchieve",
            headingKey = messages("page.reg.questionnaire.q1"),
            isPageHeading = false,
            inline = false,
            classes = "govuk-visually-hidden",
            fieldName = "ableToAchieve"
        )

        @h2(messages("page.reg.questionnaire.q2"))

            @inputRadio(
                form = qForm,
                fieldName = "satisfaction",
                inline = false,
                legend = messages("page.reg.questionnaire.q2"),
                items = Seq(
                    RadioItem(
                        id = Some("very_satisfied-5"),
                        content = Text(messages("page.reg.questionnaire.q3.a1")),
                        value = Some("very_satisfied-5"),
                        checked = qForm("satisfaction").value.contains("very_satisfied-5")
                    ),
                    RadioItem(
                        id = Some("satisfied-4"),
                        content = Text(messages("page.reg.questionnaire.q3.a2")),
                        value = Some("satisfied-4"),
                        checked = qForm("satisfaction").value.contains("satisfied-4")
                    ),
                    RadioItem(
                        id = Some("neither_satisfied_nor_dissatisfied-3"),
                        content = Text(messages("page.reg.questionnaire.q3.a3")),
                        value = Some("neither_satisfied_nor_dissatisfied-3"),
                        checked = qForm("satisfaction").value.contains("neither_satisfied_nor_dissatisfied-3")
                    ),
                    RadioItem(
                        id = Some("dissatisfied-2"),
                        content = Text(messages("page.reg.questionnaire.q3.a4")),
                        value = Some("dissatisfied-2"),
                        checked = qForm("satisfaction").value.contains("dissatisfied-2")
                    ),
                    RadioItem(
                        id = Some("very_dissatisfied-1"),
                        content = Text(messages("page.reg.questionnaire.q3.a5")),
                        value = Some("very_dissatisfied-1"),
                        checked = qForm("satisfaction").value.contains("very_dissatisfied-1")
                    ),
                ),
                classes = "govuk-visually-hidden",
                legendAsHeading = true,
            )

        @h2(messages("page.reg.questionnaire.q4"))

        @inputRadio(
            form = qForm,
            fieldName = "meetNeeds",
            inline = false,
            legend = messages("page.reg.questionnaire.q4"),
            items = Seq(
                RadioItem(
                    id = Some("10"),
                    content = Text(messages("10 - Very well")),
                    value = Some("10"),
                    checked = qForm("meetNeeds").value.contains("10")
                ),
                RadioItem(
                    id = Some("9"),
                    content = Text(messages("9")),
                    value = Some("9"),
                    checked = qForm("meetNeeds").value.contains("9")
                ),
                RadioItem(
                    id = Some("8"),
                    content = Text(messages("8")),
                    value = Some("8"),
                    checked = qForm("meetNeeds").value.contains("8")
                ),
                RadioItem(
                    id = Some("7"),
                    content = Text(messages("7")),
                    value = Some("7"),
                    checked = qForm("meetNeeds").value.contains("7")
                ),
                RadioItem(
                    id = Some("6"),
                    content = Text(messages("6")),
                    value = Some("6"),
                    checked = qForm("meetNeeds").value.contains("6")
                ),
                RadioItem(
                    id = Some("5"),
                    content = Text(messages("5")),
                    value = Some("5"),
                    checked = qForm("meetNeeds").value.contains("5")
                ),
                RadioItem(
                    id = Some("4"),
                    content = Text(messages("4")),
                    value = Some("4"),
                    checked = qForm("meetNeeds").value.contains("4")
                ),
                RadioItem(
                    id = Some("3"),
                    content = Text(messages("3")),
                    value = Some("3"),
                    checked = qForm("meetNeeds").value.contains("3")
                ),
                RadioItem(
                    id = Some("2"),
                    content = Text(messages("2")),
                    value = Some("2"),
                    checked = qForm("meetNeeds").value.contains("2")
                ),
                RadioItem(
                    id = Some("1"),
                    content = Text(messages("1")),
                    value = Some("1 - Not well"),
                    checked = qForm("meetNeeds").value.contains("1 - Not well")
                ),
            ),
            classes = "govuk-visually-hidden",
            legendAsHeading = true,
        )

        @h2(messages("page.reg.questionnaire.q2"))

        @inputRadio(
            form = qForm,
            fieldName = "recommendation",
            inline = false,
            legend = messages("page.reg.questionnaire.q2"),
            items = Seq(
                RadioItem(
                    id = Some("very_likely-5"),
                    content = Text(messages("page.reg.questionnaire.q5.a1")),
                    value = Some("very_likely-5"),
                    checked = qForm("recommendation").value.contains("very_likely-5")
                ),
                RadioItem(
                    id = Some("likely-4"),
                    content = Text(messages("page.reg.questionnaire.q5.a2")),
                    value = Some("likely-4"),
                    checked = qForm("recommendation").value.contains("likely-4")
                ),
                RadioItem(
                    id = Some("not_sure-3"),
                    content = Text(messages("page.reg.questionnaire.q5.a3")),
                    value = Some("not_sure-3"),
                    checked = qForm("recommendation").value.contains("not_sure-3")
                ),
                RadioItem(
                    id = Some("unlikely-2"),
                    content = Text(messages("page.reg.questionnaire.q5.a4")),
                    value = Some("unlikely-2"),
                    checked = qForm("recommendation").value.contains("unlikely-2")
                ),
                RadioItem(
                    id = Some("very_unlikely-1"),
                    content = Text(messages("page.reg.questionnaire.q5.a5")),
                    value = Some("very_unlikely-1"),
                    checked = qForm("recommendation").value.contains("very_unlikely-1")
                ),
            ),
            classes = "govuk-visually-hidden",
            legendAsHeading = true,
        )

        @h2(messages("page.reg.questionnaire.q6"))

        @inputTextArea(
            form = qForm,
            id = "improvements",
            name = "improvements",
            label = messages("page.reg.questionnaire.q6"),
            isLabelHidden = false,
            isPageHeading = false,
            classes = Some("govuk-visually-hidden"),
            maxCharacters = Some(100)
        )

        @button(Messages("page.reg.questionnaire.send"))
    }
}
